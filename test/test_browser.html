<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Spec Unit Tests</title>
    <link rel="stylesheet" href="../lib/newton.css" media="screen">
  </head>
  <body>
    <div id="suite"></div>
    <script>var curl = { "apiName": "require" };</script>
    <script src="../lib/spec.js"></script>
    <script src="../lib/newton.js"></script>
    <script src="vendor/curl.js"></script>
    <script>
    (function () {
      var Lynt = this.Spec || {};
      if (/[?&]async=false(?:&|$)/.test(this.location.search)) {
        this.require = this.define = null;
        document.write('<script src="test_spec.js"><\/script>');
        this.onload = function () {
          Lynt.testSuite.run();
        };
      } else {
        this.require({
          // RequireJS accepts relative paths in the module name; `curl.js` does
          // not. Both accept a `paths` map of module paths to relative paths.
          "paths": { "spec": "../lib/spec" },
          // Thwart aggressive resource caching. RequireJS only.
          "urlArgs": "async=" + (+new Date())
        }, ["spec", "test_spec"], function (Spec, testSuite) {
          // Test asynchronous module loading via RequireJS/`curl.js`.
          testSuite.addTest("Asynchronous Module Definition", function (test) {
            setTimeout(function () {
              test.equal(Lynt.version, Spec.version, "Spec should be exported as an asynchronous module").done(1);
            }, 1500);
          });
          testSuite.run();
        });
      }
    }).call(this);
    </script>
  </body>
</html>